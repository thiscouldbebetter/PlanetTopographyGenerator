<html>
<body onload="body_Loaded();">

<h3>Planet Topography Generator</h3>
<p>
	When the Generate button is clicked, a planet with random topography
	will be generated, by starting with an octohedron and recursively
	subdividing it until its shape approaches a sphere.  Increasing
	the number of times to subdivide will make for a more detailed globe,
	but the time to compute that detail will increase with the square of the number of levels.
</p>

<label>Terrain Group:</label>
<br />
<textarea id="textareaTerrainGroup" cols="40" rows="5">
</textarea>
<br />

<label>Initial Shape:</label>
<select id="selectShapeInitial">
	<option>Octahedron</option>
	<option>Square</option>
	<option>Tube</option>
</select>
<br />

<label>Times to Subdivide Initial Shape:</label>
<input id="inputTimesToSubdivide" type="number" value="5"></input>
<br />

<label>Projection:</label>
<select id="selectProjection">
	<option>3D</option>
	<option>Mercator</option>
</select>

<br />

<button onclick="buttonGenerate_Clicked();">Generate</button>
<br />

<div id="divOutput"></div>

<script type="text/javascript">

function body_Loaded()
{
	var terrainGroup = TerrainGroup.Instances().Earthlike;
	var terrainGroupAsString = terrainGroup.toString();
	var d = document;
	var textareaTerrainGroup =
		d.getElementById("textareaTerrainGroup");
	textareaTerrainGroup.value = terrainGroupAsString;
}

function buttonGenerate_Clicked()
{
	var d = document;

	var divOutput = d.getElementById("divOutput");
	divOutput.innerHTML = "";

	var selectShapeInitial =
		d.getElementById("selectShapeInitial");
	var shapeInitialName = selectShapeInitial.value;
	var shapeInitial = Shape.byName(shapeInitialName);

	var inputTimesToSubdivide =
		d.getElementById("inputTimesToSubdivide");
	var timesToSubdivide =
		parseInt(inputTimesToSubdivide.value);

	var selectProjection =
		d.getElementById("selectProjection");
	var projectionName = selectProjection.value;

	var generator = new PlanetTopographyGenerator
	(
		shapeInitial, timesToSubdivide
	);

	var meshes = generator.meshesGenerate();

	if (projectionName == "3D")
	{
		var scenes = generator.meshesToScenes(meshes);
		Globals.Instance.initialize(scenes);
	}
	else if (projectionName == "Mercator")
	{
		var meshFinal = meshes[meshes.length - 1];
		var display = new Display(new Coords(200, 200, 1));
		display.initialize();
		display.drawMeshProjectedMercator(meshFinal);
	}
	else
	{
		throw new Error("Unrecognized projection type: " + projectionName + ".");
	}

}

</script>

<script type="text/javascript" src="PlanetTopographyGenerator.js"></script>

<script type="text/javascript" src="Camera.js"></script>
<script type="text/javascript" src="Constraint_LookAtBody.js"></script>
<script type="text/javascript" src="Constraint_MaintainDistance.js"></script>
<script type="text/javascript" src="Coords.js"></script>
<script type="text/javascript" src="Display.js"></script>
<script type="text/javascript" src="Disposition.js"></script>
<script type="text/javascript" src="Edge.js"></script>
<script type="text/javascript" src="Empty.js"></script>
<script type="text/javascript" src="Face.js"></script>
<script type="text/javascript" src="Globals.js"></script>
<script type="text/javascript" src="InputHelper.js"></script>
<script type="text/javascript" src="Mesh.js"></script>
<script type="text/javascript" src="MeshHelper.js"></script>
<script type="text/javascript" src="Orientation.js"></script>
<script type="text/javascript" src="Plane.js"></script>
<script type="text/javascript" src="Polar.js"></script>
<script type="text/javascript" src="Scene.js"></script>
<script type="text/javascript" src="Shape.js"></script>
<script type="text/javascript" src="Terrain.js"></script>
<script type="text/javascript" src="Vertex.js"></script>

<script type="text/javascript" src="Imports.js"></script>

</script>
</body>
</html>
